<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Inventario de Componentes</title>
</head>
<body>
    <h1>Inventario de Componentes</h1>

    <form method="get" action="{{ url_for('inventory') }}">
        <label for="aircraft_registration">Filtrar por Matrícula:</label>
        <select name="aircraft_registration" id="aircraft_registration" onchange="this.form.submit()">
            <option value="">-- Todas --</option>
            {% for aircraft in aircrafts %}
                <option value="{{ aircraft }}" {% if selected_aircraft == aircraft %}selected{% endif %}>{{ aircraft }}</option>
            {% endfor %}
        </select>
        <noscript><button type="submit">Filtrar</button></noscript>
    </form>

    <table border="1" cellpadding="5" cellspacing="0">
        <thead>
            <tr>
                <th>ID</th>
                <th>Número de Parte</th>
                <th>Descripción</th>
                <th>Número de Serie</th>
                <th>Fecha de Entrada</th>
                <th>Ubicación</th>
                <th>Estado</th>
                <th>Técnico</th>
                <th>Matrícula</th>
                <th>Número de Tarea (W.O.)</th>
                <th>Acción</th>
            </tr>
        </thead>
        <tbody>
            {% for c in components %}
            <tr>
                <td>{{ c.id }}</td>
                <td>{{ c.part_number }}</td>
                <td>{{ c.description }}</td>
                <td>{{ c.serial_number }}</td>
                <td>{{ c.entry_date }}</td>
                <td>{{ c.location }}</td>
                <td>{{ c.status }}</td>
                <td>{{ c.technician }}</td>
                <td>{{ c.aircraft_registration }}</td>
                <td>{{ c.wo_number }}</td>
                <td>
                    <form method="post" action="{{ url_for('register_out', id=c.id) }}">
                        Taller: <input type="text" name="output_location" required><br>
                        Técnico salida: <input type="text" name="output_technician" required><br>
                        Destino: <input type="text" name="output_destination" required><br>
                        Fecha salida: <input type="date" name="output_date"><br>
                        <button type="submit">Registrar Salida</button>
                    </form>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="11">No hay componentes para mostrar.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
